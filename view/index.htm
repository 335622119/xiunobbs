<?php include "./view/header.inc.htm"; ?>

<div class="row">
	<div class="col-md-8 col-md-offset-2">
		<form class="form-group-sm" action="<?php echo url('user-login');?>" method="post" id="form">
			<fieldset class="form-group">
				<label for="exampleInputEmail1">Email address</label>
				<input type="email" class="form-control col-xs-12 col-lg-5" id="exampleInputEmail1" placeholder="Enter email">
				<small class="text-muted">We'll never share your email with anyone else.</small>
			</fieldset>
			<fieldset class="form-group">
				<label for="exampleInputPassword1">Password</label>
				<input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
			</fieldset>
			<fieldset class="form-group">
				<label for="exampleSelect1">Example select</label>
				<select class="form-control" id="exampleSelect1">
					<option>1</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5</option>
				</select>
			</fieldset>
			<fieldset class="form-group">
				<label for="exampleSelect2">Example multiple select</label>
				<select multiple class="form-control" id="exampleSelect2">
					<option>1</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5</option>
				</select>
			</fieldset>
			<fieldset class="form-group">
				<label for="exampleTextarea">Example textarea</label>
				<textarea class="form-control" id="exampleTextarea" rows="3"></textarea>
			</fieldset>
			<fieldset class="form-group">
				<label for="exampleInputFile">File input</label>
				<input type="file" class="form-control-file" id="exampleInputFile">
				<small class="text-muted">This is some placeholder block-level help text for the above input. It's a bit lighter and easily wraps to a new line.</small>
			</fieldset>
			<div class="radio">
				<label>
					<input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
					Option one is this and that&mdash;be sure to include why it's great
				</label>
			</div>
			<div class="radio">
				<label>
					<input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
					Option two can be something else and selecting it will deselect option one
				</label>
			</div>
			<div class="radio disabled">
				<label>
					<input type="radio" name="optionsRadios" id="optionsRadios3" value="option3" disabled>
					Option three is disabled
				</label>
			</div>
			<div class="checkbox">
				<label>
					<input type="checkbox"> Check me out
				</label>
			</div>
			
				
			<div class="form-group has-success">
				<label class="control-label" for="inputSuccess1">Input with success</label>
				<input type="text" class="form-control form-control-success" id="inputSuccess1">
			</div>
			<div class="form-group has-warning">
				<label class="control-label" for="inputWarning1">Input with warning</label>
				<input type="text" class="form-control form-control-warning" id="inputWarning1">
			</div>
			<div class="form-group has-danger">
				<label class="control-label" for="inputError1">Input with error</label>
				<input type="text" class="form-control form-control-error" id="inputError1">
			</div>
			
			<div class="has-success">
				<div class="checkbox">
					<label>
						<input type="checkbox" id="checkboxSuccess" value="option1">
						Checkbox with success
					</label>
				</div>
			</div>
			<div class="has-warning">
				<div class="checkbox">
					<label>
						<input type="checkbox" id="checkboxWarning" value="option1">
						Checkbox with warning
					</label>
				</div>
			</div>
			<div class="has-danger">
				<div class="checkbox">
					<label>
						<input type="checkbox" id="checkboxError" value="option1">
						Checkbox with error
					</label>
				</div>
			</div>
				
			<button type="submit" class="btn btn-primary" id="submit">登陆</button>
			
			<br>
			<br>
			<br>
			<br>
		</form>
	</div>
</div>

<?php include "./view/footer.inc.htm"; ?>

<script>
var jsubmit = $('#submit');
jsubmit.on('click', function() {
	var jname = $('#name');
	var name = jname.val();
	if(!name) {
		alert('请输入姓名！');
		jname.focus();
		return false;
	}
	if(name.length > 4) {
		alert('最多只支持 4 个字！');
		jname.focus();
		return false;
	}
	jsubmit.button('loading');
	window.location = 'index-'+jname.val()+'.htm';
});

var jform = $('#form');
var jsubmit = $('#submit');
jform.on('submit', function() {
	var postdata = jform.serialize();
	$.xpost(jform.attr('action'), postdata, function(code, message) {
		if(code == 0) {
			jsubmit.button('登录成功');
			//$.pdata('user', user);
			$.pdata('myagreelist', message.myagreelist);
			// 服务端已经设置了 cookie
			//$.cookie('bbs_token', message.token);
			setTimeout(function() {window.location='./';}, 1000);
		} else if(code > 0) {
			if(code == 1) jaccount.popover(message).focus();
			if(code == 2) jpassword.popover(message).focus();
			jsubmit.button('reset');
		} else if(code < 0) {
			alert(message);
			jsubmit.button('reset');
		}
	});
	return false;
});

</script>